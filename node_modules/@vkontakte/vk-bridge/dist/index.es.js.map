{"version":3,"file":"index.es.js","sources":["../src/promisifySend.ts","../src/utils.ts","../src/bridge.ts","../src/types/data.ts","../src/applyMiddleware.ts","../src/parseURLSearchParamsForGetLaunchParams.ts","../src/index.ts"],"sourcesContent":["import {\n  VKBridgeSubscribeHandler,\n  AnyRequestMethodName,\n  RequestProps,\n  RequestIdProp,\n  ReceiveData,\n  AnyReceiveMethodName,\n} from './types/bridge';\n\n/**\n * Creates counter interface.\n */\nfunction createCounter() {\n  return {\n    current: 0,\n    next() {\n      return ++this.current;\n    },\n  };\n}\n\n/**\n * Creates interface for resolving request promises by request id's (or not).\n *\n * @param instanceId Uniq bridge instance ID.\n */\nfunction createRequestResolver(instanceId: string) {\n  /**\n   * @prop resolve Resolve function.\n   * @prop reject Reject function.\n   */\n  type PromiseController = {\n    resolve: (value: any) => any;\n    reject: (reason: any) => any;\n  };\n\n  const counter = createCounter();\n  const promiseControllers: Record<number | string, PromiseController | null> = {};\n\n  return {\n    /**\n     * Adds new controller with resolve/reject methods.\n     *\n     * @param controller Object with `resolve` and `reject` functions\n     * @param customId Custom `request_id`\n     * @returns New request id of the added controller.\n     */\n    add(controller: PromiseController, customId?: number | string): number | string {\n      const id = customId != null ? customId : `${counter.next()}_${instanceId}`;\n\n      promiseControllers[id] = controller;\n\n      return id;\n    },\n\n    /**\n     * Resolves/rejects an added promise by request id and the `isSuccess`\n     * predicate.\n     *\n     * @param requestId Request ID.\n     * @param data Data to pass to the resolve- or reject-function.\n     * @param isSuccess Predicate to select the desired function.\n     */\n    resolve<T>(requestId: number | string, data: T, isSuccess: (data: T) => boolean) {\n      const requestPromise = promiseControllers[requestId];\n\n      if (requestPromise) {\n        if (isSuccess(data)) {\n          requestPromise.resolve(data);\n        } else {\n          requestPromise.reject(data);\n        }\n\n        promiseControllers[requestId] = null;\n      }\n    },\n  };\n}\n\n/**\n * Returns send function that returns promises.\n *\n * @param sendEvent Send event function.\n * @param subscribe Subscribe event function.\n * @param instanceId Uniq bridge instance ID.\n * @returns Send function which returns the Promise object.\n */\nexport function promisifySend(\n  sendEvent: <K extends AnyRequestMethodName>(\n    method: K,\n    props?: RequestProps<K> & RequestIdProp,\n  ) => void,\n  subscribe: (fn: VKBridgeSubscribeHandler) => void,\n  instanceId: string,\n) {\n  const requestResolver = createRequestResolver(instanceId);\n\n  // Subscribe to receive a data\n  subscribe((event) => {\n    if (!event.detail || !event.detail.data || typeof event.detail.data !== 'object') {\n      return;\n    }\n\n    // There is no request_id in receive-only events, so we check its existence.\n    if ('request_id' in event.detail.data) {\n      const { request_id: requestId, ...data } = event.detail.data;\n\n      if (requestId) {\n        requestResolver.resolve(requestId, data, (data) => !('error_type' in data));\n      }\n    }\n  });\n\n  return function promisifiedSend<K extends AnyRequestMethodName>(\n    method: K,\n    props: RequestProps<K> & RequestIdProp = {} as RequestProps<K> & RequestIdProp, // eslint-disable-line @typescript-eslint/consistent-type-assertions\n  ): Promise<K extends AnyReceiveMethodName ? ReceiveData<K> : void> {\n    return new Promise((resolve, reject) => {\n      const requestId = requestResolver.add({ resolve, reject }, props.request_id);\n\n      sendEvent(method, {\n        ...props,\n        request_id: requestId,\n      });\n    });\n  };\n}\n","export function createInstanceId() {\n  const allNumbersAndLetters = 36;\n  const positionAfterZeroAnDot = 2;\n  const keyLength = 3;\n  return Math.random()\n    .toString(allNumbersAndLetters)\n    .substring(positionAfterZeroAnDot, positionAfterZeroAnDot + keyLength);\n}\n","import { promisifySend } from './promisifySend';\nimport {\n  VKBridge,\n  VKBridgeSubscribeHandler,\n  AnyRequestMethodName,\n  RequestProps,\n  RequestIdProp,\n} from './types/bridge';\nimport { createInstanceId } from './utils';\n\n/** Is the client side runtime environment */\nexport const IS_CLIENT_SIDE = typeof window !== 'undefined';\n\n/** Is the runtime environment an Android app */\nexport const IS_ANDROID_WEBVIEW = Boolean(IS_CLIENT_SIDE && (window as any).AndroidBridge);\n\n/** Is the runtime environment an iOS app */\nexport const IS_IOS_WEBVIEW = Boolean(\n  IS_CLIENT_SIDE &&\n    (window as any).webkit &&\n    (window as any).webkit.messageHandlers &&\n    (window as any).webkit.messageHandlers.VKWebAppClose,\n);\n\nexport const IS_REACT_NATIVE_WEBVIEW = Boolean(\n  IS_CLIENT_SIDE &&\n    (window as any).ReactNativeWebView &&\n    typeof (window as any).ReactNativeWebView.postMessage === 'function',\n);\n\n/** Is the runtime environment a browser */\nexport const IS_WEB = IS_CLIENT_SIDE && !IS_ANDROID_WEBVIEW && !IS_IOS_WEBVIEW;\n\n/** Is the runtime environment m.vk.com */\nexport const IS_MVK = IS_WEB && /(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search);\n\n/** Is the runtime environment vk.com */\nexport const IS_DESKTOP_VK = IS_WEB && !IS_MVK;\n\n/** Type of subscribe event */\nexport const EVENT_TYPE = IS_WEB ? 'message' : 'VKWebAppEvent';\n\n/** Methods supported on the desktop */\nexport const DESKTOP_METHODS = [\n  'VKWebAppInit',\n  'VKWebAppGetCommunityAuthToken',\n  'VKWebAppAddToCommunity',\n  'VKWebAppAddToHomeScreenInfo',\n  'VKWebAppClose',\n  'VKWebAppCopyText',\n  'VKWebAppCreateHash',\n  'VKWebAppGetUserInfo',\n  'VKWebAppSetLocation',\n  'VKWebAppSendToClient',\n  'VKWebAppGetClientVersion',\n  'VKWebAppGetPhoneNumber',\n  'VKWebAppGetEmail',\n  'VKWebAppGetGroupInfo',\n  'VKWebAppGetGeodata',\n  'VKWebAppGetCommunityToken',\n  'VKWebAppGetConfig',\n  'VKWebAppGetLaunchParams',\n  'VKWebAppSetTitle',\n  'VKWebAppGetAuthToken',\n  'VKWebAppCallAPIMethod',\n  'VKWebAppJoinGroup',\n  'VKWebAppLeaveGroup',\n  'VKWebAppAllowMessagesFromGroup',\n  'VKWebAppDenyNotifications',\n  'VKWebAppAllowNotifications',\n  'VKWebAppOpenPayForm',\n  'VKWebAppOpenApp',\n  'VKWebAppShare',\n  'VKWebAppShowWallPostBox',\n  'VKWebAppScroll',\n  'VKWebAppShowOrderBox',\n  'VKWebAppShowLeaderBoardBox',\n  'VKWebAppShowInviteBox',\n  'VKWebAppShowRequestBox',\n  'VKWebAppAddToFavorites',\n  'VKWebAppShowStoryBox',\n  'VKWebAppStorageGet',\n  'VKWebAppStorageGetKeys',\n  'VKWebAppStorageSet',\n  'VKWebAppFlashGetInfo',\n  'VKWebAppSubscribeStoryApp',\n  'VKWebAppOpenWallPost',\n  'VKWebAppCheckAllowedScopes',\n  'VKWebAppCheckBannerAd',\n  'VKWebAppHideBannerAd',\n  'VKWebAppShowBannerAd',\n  'VKWebAppCheckNativeAds',\n  'VKWebAppShowNativeAds',\n  'VKWebAppRetargetingPixel',\n  'VKWebAppConversionHit',\n  'VKWebAppShowSubscriptionBox',\n  'VKWebAppCheckSurvey',\n  'VKWebAppShowSurvey',\n  'VKWebAppScrollTop',\n  'VKWebAppScrollTopStart',\n  'VKWebAppScrollTopStop',\n  'VKWebAppShowSlidesSheet',\n  'VKWebAppTranslate',\n  'VKWebAppRecommend',\n  'VKWebAppAddToProfile',\n\n  // Desktop web specific events\n  ...(IS_DESKTOP_VK\n    ? [\n        'VKWebAppResizeWindow',\n        'VKWebAppAddToMenu',\n        'VKWebAppShowInstallPushBox',\n        'VKWebAppGetFriends',\n        'VKWebAppShowCommunityWidgetPreviewBox',\n        'VKWebAppCallStart',\n        'VKWebAppCallJoin',\n        'VKWebAppCallGetStatus',\n      ]\n    : ['VKWebAppShowImages']),\n];\n\n/** Android VK Bridge interface. */\nconst androidBridge: Record<AnyRequestMethodName, (serializedData: string) => void> | undefined =\n  IS_CLIENT_SIDE ? (window as any).AndroidBridge : undefined;\n\n/** iOS VK Bridge interface. */\nconst iosBridge: Record<AnyRequestMethodName, { postMessage?: (data: any) => void }> | undefined =\n  IS_IOS_WEBVIEW ? (window as any).webkit.messageHandlers : undefined;\n\n/** Web VK Bridge interface. */\nconst webBridge: { postMessage?: (message: any, targetOrigin: string) => void } | undefined = IS_WEB\n  ? parent\n  : undefined;\n\n// [Примечание 1] Отключили использование в этом PR https://github.com/VKCOM/vk-bridge/pull/262\n// let webSdkHandlers: string[] | undefined;\n\n/**\n * Creates a VK Bridge API that holds functions for interact with runtime\n * environment.\n *\n * @param version Version of the package\n */\nexport function createVKBridge(version: string): VKBridge {\n  /** Current frame id. */\n  let webFrameId: string | undefined = undefined;\n\n  /** List of functions that subscribed on events. */\n  const subscribers: VKBridgeSubscribeHandler[] = [];\n\n  /** Uniq instance ID */\n  const instanceId = createInstanceId();\n\n  /**\n   * Sends an event to the runtime env. In the case of Android/iOS application\n   * env is the application itself. In the case of the browser, the parent\n   * frame in which the event handlers is located.\n   *\n   * @param method The method (event) name to send\n   * @param [props] Method properties\n   */\n  function send<K extends AnyRequestMethodName>(\n    method: K,\n    props?: RequestProps<K> & RequestIdProp,\n  ) {\n    // Sending data through Android bridge\n\n    if (androidBridge && androidBridge[method]) {\n      androidBridge[method](JSON.stringify(props));\n    }\n\n    // Sending data through iOS bridge\n    else if (\n      iosBridge &&\n      iosBridge[method] &&\n      typeof iosBridge[method].postMessage === 'function'\n    ) {\n      iosBridge[method].postMessage!(props);\n    }\n\n    // Sending data through React Native bridge\n    else if (IS_REACT_NATIVE_WEBVIEW) {\n      (window as any).ReactNativeWebView.postMessage(\n        JSON.stringify({\n          handler: method,\n          params: props,\n        }),\n      );\n    }\n\n    // Sending data through web bridge\n    else if (webBridge && typeof webBridge.postMessage === 'function') {\n      webBridge.postMessage(\n        {\n          handler: method,\n          params: props,\n          type: 'vk-connect',\n          webFrameId,\n          connectVersion: version,\n        },\n        '*',\n      );\n    }\n  }\n\n  /**\n   * Adds an event listener. It will be called any time a data is received.\n   *\n   * @param listener A callback to be invoked on every event receive.\n   */\n  function subscribe(listener: VKBridgeSubscribeHandler) {\n    subscribers.push(listener);\n  }\n\n  /**\n   * Removes an event listener which has been subscribed for event listening.\n   *\n   * @param listener A callback to unsubscribe.\n   */\n  function unsubscribe(listener: VKBridgeSubscribeHandler) {\n    const index = subscribers.indexOf(listener);\n\n    if (index > -1) {\n      subscribers.splice(index, 1);\n    }\n  }\n\n  /**\n   * Checks if a method is supported on runtime platform.\n   *\n   * @param method Method (event) name to check.\n   * @returns Result of checking.\n   */\n  function supports<K extends AnyRequestMethodName>(method: K): boolean {\n    if (IS_ANDROID_WEBVIEW) {\n      // Android support check\n      return !!(androidBridge && typeof androidBridge[method] === 'function');\n    } else if (IS_IOS_WEBVIEW) {\n      // iOS support check\n      return !!(\n        iosBridge &&\n        iosBridge[method] &&\n        typeof iosBridge[method].postMessage === 'function'\n      );\n    } else if (IS_WEB) {\n      // Web support check\n      return DESKTOP_METHODS.includes(method);\n      // см. Примечание 1\n      // if (!webSdkHandlers) {\n      //   console.error('You should call bridge.send(\"VKWebAppInit\") first');\n      //   return false;\n      // }\n      // return webSdkHandlers.includes(method);\n    }\n\n    return false;\n  }\n\n  /**\n   * Checks whether the runtime is a WebView.\n   *\n   * @returns Result of checking.\n   */\n  function isWebView(): boolean {\n    return IS_IOS_WEBVIEW || IS_ANDROID_WEBVIEW;\n  }\n\n  /**\n   * Checks whether the runtime is an iframe.\n   *\n   * @returns Result of checking.\n   */\n  function isIframe(): boolean {\n    return IS_WEB && window.parent !== window;\n  }\n\n  /**\n   * Checks whether the runtime is embedded.\n   *\n   * @returns Result of checking.\n   */\n  function isEmbedded(): boolean {\n    return isWebView() || isIframe();\n  }\n\n  /**\n   * Checks whether the runtime is standalone.\n   *\n   * @returns Result of checking.\n   */\n  function isStandalone(): boolean {\n    return !isEmbedded();\n  }\n\n  function handleEvent(event: any) {\n    if (IS_IOS_WEBVIEW || IS_ANDROID_WEBVIEW) {\n      // If it's webview\n      return [...subscribers].map((fn) => fn.call(null, event));\n    }\n\n    let bridgeEventData = event?.data;\n    if (!IS_WEB || !bridgeEventData) {\n      return;\n    }\n\n    if (IS_REACT_NATIVE_WEBVIEW && typeof bridgeEventData === 'string') {\n      try {\n        bridgeEventData = JSON.parse(bridgeEventData);\n      } catch {}\n    }\n\n    const { type, data, frameId } = bridgeEventData;\n    if (!type) {\n      return;\n    }\n\n    // см. Примечание 1\n    // if (type === 'SetSupportedHandlers') {\n    //   webSdkHandlers = data.supportedHandlers;\n    //   return;\n    // }\n\n    if (type === 'VKWebAppSettings') {\n      webFrameId = frameId;\n      return;\n    }\n\n    [...subscribers].map((fn) => fn({ detail: { type, data } }));\n  }\n\n  // Subscribes to listening messages from a runtime for calling each\n  // subscribed event listener.\n  if (IS_REACT_NATIVE_WEBVIEW && /(android)/i.test(navigator.userAgent)) {\n    document.addEventListener(EVENT_TYPE, handleEvent);\n  } else if (typeof window !== 'undefined' && 'addEventListener' in window) {\n    window.addEventListener(EVENT_TYPE, handleEvent);\n  }\n\n  /**\n   * Enhanced send functions for the ability to receive response data in\n   * the Promise object.\n   */\n  const sendPromise = promisifySend(send, subscribe, instanceId);\n\n  return {\n    send: sendPromise,\n    sendPromise,\n    subscribe,\n    unsubscribe,\n    supports,\n    isWebView,\n    isIframe,\n    isEmbedded,\n    isStandalone,\n  };\n}\n","/** Type of the Personal Card */\nexport type PersonalCardType = 'phone' | 'email' | 'address';\n\n/** Access Permissions for User Token */\nexport type PersonalAuthScope =\n  | 'friends'\n  | 'photos'\n  | 'video'\n  | 'stories'\n  | 'pages'\n  | 'status'\n  | 'notes'\n  | 'wall'\n  | 'docs'\n  | 'groups'\n  | 'stats'\n  | 'market';\n\n/** Access Permissions for Community Token */\nexport type CommunityAuthScope =\n  | 'stories'\n  | 'photos'\n  | 'app_widget'\n  | 'messages'\n  | 'docs'\n  | 'manage';\n\n/**\n * Type of VKWebAppGetFriendsResult user\n */\nexport type UserGetFriendsFriend = {\n  /** User id */\n  id: number;\n  /** User name */\n  first_name: string;\n  /** User surname */\n  last_name: string;\n  /** User sex: 0 - not specified, 1 - female, 2 - male */\n  sex: 0 | 1 | 2;\n  /**\n   * URL of the square user's photo with 200px width.\n   * https://vk.com/images/camera_200.png will be returned if the photo\n   * is not set.\n   */\n  photo_200: string;\n};\n\n/**\n * Type of user info object\n */\nexport type UserInfo = {\n  /** User id */\n  id: number;\n  /** User name */\n  first_name: string;\n  /** User surname */\n  last_name: string;\n  /** User sex: 0 - not specified, 1 - female, 2 - male */\n  sex: 0 | 1 | 2;\n  /** User's city */\n  city: {\n    /** City ID */\n    id: number;\n    /** City title */\n    title: string;\n  };\n  /** User's country */\n  country: {\n    /** Country ID */\n    id: number;\n    /** Country  title */\n    title: string;\n  };\n  /**\n   * Date of Birth. It is returned in the format D.M.YYYY or D.M (if the\n   * year of birth is hidden). If the date of birth is hidden entirely,\n   * the field is not in the response.\n   */\n  bdate?: string;\n  /**\n   * URL of the square user's photo with 100px width.\n   * https://vk.com/images/camera_100.png will be returned if the photo\n   * is not set.\n   */\n  photo_100: string;\n  /**\n   * URL of the square user's photo with 200px width.\n   * https://vk.com/images/camera_200.png will be returned if the photo\n   * is not set.\n   */\n  photo_200: string;\n  /**\n   * URL of the square user's photo with maximum size.\n   * https://vk.com/images/camera_400.png will be returned if the photo\n   * is not set.\n   */\n  photo_max_orig?: string;\n  /** User's timezone */\n  timezone?: number;\n};\n\n/**\n * User's contact data from the Personal Card from\n */\nexport type PersonalCardData = {\n  phone?: string;\n  email?: string;\n  address?: {\n    country?: {\n      id: number;\n      name: string;\n    };\n    city?: {\n      id: number;\n      name: string;\n    };\n    specified_address?: string;\n    postal_code?: string;\n  };\n};\n\n/**\n * Map of VK Pay request params\n */\nexport type VKPayActionParamsMap = {\n  /** Payment with a given amount to a user */\n  'pay-to-user': {\n    /** The amount of payment in rubles. The minimum value is 1 */\n    amount?: number;\n    /** User ID */\n    user_id: number;\n    /** Payment description */\n    description?: string;\n  };\n  /** Payment with a given amount to a community */\n  'pay-to-group': {\n    /** The amount of payment in rubles. The minimum value is 1 */\n    amount: number;\n    /** Community ID */\n    group_id: number;\n    /** Payment description */\n    description?: string;\n    /** Dictionary with arbitrary parameters */\n    data?: string;\n  };\n  /** Transferring an arbitrary amount to a user */\n  'transfer-to-user': {\n    user_id: number;\n  };\n  /** Transferring an arbitrary amount to a community */\n  'transfer-to-group': {\n    group_id: number;\n  };\n  /**\n   * Payment in favor of the merchant\n   * @see {@link https://vk.com/@devpay-vk-pay-how-to VK Pay How To}\n   */\n  'pay-to-service': {\n    /**\n     * Amount of payment. The minimum value is 1. The amount field is\n     * involved in the formation of merchant_data for the signature of\n     * the seller.\n     */\n    amount: number | string;\n    /**\n     * Description of the payment for user. The text will be shown in\n     * payment dialog\n     */\n    description: string;\n    /**\n     * Merchant ID. This is your ID in the payment system, obtained after\n     * the conclusion of the contract along with the seller’s private key\n     */\n    merchant_id: number;\n    /** Version of the payment form */\n    version: number;\n    /** The signature of the VK app that caused the payment */\n    sign: string;\n    /** Service data */\n    data: {\n      /** Currency. Only RUB is currently supported */\n      currency: 'RUB';\n      /** Base64-string of data for the signature of the seller */\n      merchant_data: string;\n      /** SHA-1 seller sign */\n      merchant_sign: string;\n      /** Sales order id */\n      order_id: string | number;\n      /** Timestamp */\n      ts: number;\n      /** Cashback data */\n      cashback?: {\n        /** Cashback timestamp */\n        pay_time: number;\n        /** Cashback size */\n        amount?: number;\n        /** Percentage cashback size */\n        amount_percent?: number;\n      };\n    };\n  };\n};\n\n/**\n * Possible types VK Pay operations\n */\nexport type VKPayActionType = keyof VKPayActionParamsMap;\n\n/**\n * VK Pay request props\n */\nexport type VKPayProps<ActionType extends VKPayActionType> = {\n  app_id: number;\n  action: ActionType;\n  params: VKPayActionParamsMap[ActionType];\n};\n\n/**\n * Appearance type\n */\nexport type AppearanceType = 'light' | 'dark';\n\n/**\n * Application color scheme type\n */\nexport type AppearanceSchemeType = 'vkcom_light' | 'vkcom_dark' | 'space_gray' | 'bright_light';\n\n/**\n * Vibration type for Taptic Engine\n */\nexport type TapticVibrationPowerType = 'light' | 'medium' | 'heavy';\n\n/**\n * Notification type for Taptic Engine\n */\nexport type TapticNotificationType = 'error' | 'success' | 'warning';\n\n/** Status of showing order box */\nexport type OrderBoxShowingStatus = 'cancel' | 'success' | 'fail';\n\n/**\n * Community widget type\n */\nexport type CommunityWidgetType =\n  | 'text'\n  | 'list'\n  | 'table'\n  | 'tiles'\n  | 'compact_list'\n  | 'cover_list'\n  | 'match'\n  | 'matches'\n  | 'donation';\n\n/**\n * Output data from code reader\n */\nexport type CodeReaderOutput = {\n  /** Read QR code data */\n  code_data: string;\n};\n\n/**\n * Selected contact data\n */\nexport type SelectedContact = {\n  phone: string;\n  first_name: string;\n  last_name: string;\n};\n\n/**\n * Request result data\n */\nexport type RequestResult = {\n  /** Operation success */\n  success: boolean;\n  /** `requestKey` from request */\n  requestKey: string;\n};\n\n/**\n * Result data of transaction\n */\nexport type TransactionResult = {\n  /** Payment (true — successful, false — unsuccessful). */\n  status: boolean;\n  /** Payment transaction identifier (for `status=true`). */\n  transaction_id: string;\n  /** Payment amount */\n  amount: string;\n  /** Additional information of the seller */\n  extra?: string | null;\n};\n\n/**\n * Screen insets.\n */\nexport type Insets = {\n  top: number;\n  left: number;\n  right: number;\n  bottom: number;\n};\n\nexport type AdaptivityType = 'force_mobile' | 'force_mobile_compact' | 'adaptive';\n\n/** Default fields for config response on all platforms */\nexport type DefaultUpdateConfigData = {\n  /** App_id of opened app */\n  app_id: string;\n  /** Native app appearance */\n  appearance: AppearanceType;\n  /** Native app scheme */\n  scheme: AppearanceSchemeType;\n};\n\n/** Config response for native platforms */\nexport type MobileUpdateConfigData = DefaultUpdateConfigData & {\n  /** Client type */\n  app: 'vkclient' | 'vkme';\n  /** Safe area insets. iOS only */\n  insets?: Insets;\n};\n\n/** Config response for m.vk.com and vk.com */\nexport type SharedUpdateConfigData = DefaultUpdateConfigData & {\n  /** window.innerWidth of the parent window */\n  viewport_width: number;\n  /** window.innerHeight of the parent window */\n  viewport_height: number;\n  /** Server API host for direct requests. */\n  api_host: string;\n  /** Adaptivity type. */\n  adaptivity?: AdaptivityType;\n};\n\n/** Config response for m.vk.com (mobile browser) */\nexport type MVKUpdateConfigData = SharedUpdateConfigData;\n\n/** Config response for vk.com (full web) */\nexport type VKUpdateConfigData = SharedUpdateConfigData & {\n  /** Is app opened in layer */\n  is_layer: boolean;\n};\n\n/** Update config data */\nexport type ParentConfigData = MobileUpdateConfigData | MVKUpdateConfigData | VKUpdateConfigData;\n\nexport type WidgetPreviewRequestOptions = {\n  /** Widget type */\n  type: CommunityWidgetType;\n  /** Community ID */\n  group_id: number;\n  /**\n   * Widget code\n   * @see {@link https://vk.com/dev/execute Execute method}\n   */\n  code: string;\n};\n\nexport type VKWebAppLibverifyOnFailedCode =\n  | 'GENERAL_ERROR'\n  | 'UNSUPPORTED_NUMBER'\n  | 'INCORRECT_PHONE_NUMBER'\n  | 'INCORRECT_SMS_CODE'\n  | 'RATELIMIT'\n  | 'NETWORK_ERROR'\n  | 'NO_NETWORK';\n\n/**\n * App close status\n */\nexport type AppCloseStatus = 'success' | 'failed';\n\nexport type CommunityTokenRequestOptions = {\n  app_id: number;\n  group_id: number;\n  scope: CommunityAuthScope | string;\n};\n\nexport type MessageRequestOptions = {\n  /** Receiver ID (user, community, chat) */\n  peer_id: number;\n  /** Message text */\n  message: string;\n  /** List of attaches */\n  attachment?: string;\n  /** Geographic latitude of a point, specified in degrees (from -90 to 90). */\n  lat?: number;\n  /** Geographic longitude of a point, specified in degrees (from -180 to 180). */\n  lng?: number;\n};\n\nexport enum EAdsFormats {\n  REWARD = 'reward',\n  INTERSTITIAL = 'interstitial',\n}\n\nexport type ShowNativeAdsRequest = {\n  ad_format: EAdsFormats;\n  use_waterfall?: boolean;\n};\n\nexport type CheckNativeAdsRequest = {\n  ad_format: EAdsFormats;\n  use_waterfall?: boolean;\n};\n\nexport enum BannerAdLayoutType {\n  RESIZE = 'resize',\n  OVERLAY = 'overlay',\n}\n\nexport enum BannerAdLocation {\n  TOP = 'top',\n  BOTTOM = 'bottom',\n}\n\nexport type ShowBannerAdRequest = {\n  banner_location: BannerAdLocation;\n  layout_type?: BannerAdLayoutType;\n  can_close?: boolean;\n};\n\nexport type OrderRequestOptions = {\n  /** Always `item` */\n  type: 'item';\n  /**\n   * Name of product. Will be transmitted in the notification of receipt\n   * of product information\n   */\n  item: string;\n};\n\nexport type RequestForRequestOptions = {\n  /** User Id */\n  uid: number;\n  /** Request test */\n  message: string;\n  /**\n   * Optional parameter. Custom string to track conversion. It is passed\n   * in the application launch parameters in case of launch from the\n   * request.\n   */\n  requestKey?: string;\n};\n\nexport type WallPostRequestOptions = {\n  /**\n   * ID of the user or community on whose wall the post is to be\n   * published\n   */\n  owner_id?: number;\n  /**\n   * `true` - the post posted on behalf of the community will have a\n   * signature added (the name of the user who posted the post)\n   * `false` - the signature will not be added. The parameter is taken\n   * into account only when publishing on the community wall and\n   * specifying the from_group parameter. By default, the signature is\n   * not added\n   */\n  signed?: boolean;\n  /** Latitude, specified in degrees (from -90 to 90) */\n  lat?: number;\n  /** Longitude, specified in degrees (from -180 to 180) */\n  long?: number;\n  /** The place ID where the user is marked */\n  place_id?: number;\n  /**\n   * `true` - post will be available to friends only\n   * `false` - post will be available to all users (default)\n   */\n  friends_only?: boolean;\n  /**\n   * List of services or websites the update will be exported to, if the user has so requested.\n   * Sample values: 'twitter', 'facebook'\n   */\n  services?: 'twitter' | 'facebook' | string;\n  /** Publication date (in Unix time). If used, posting will be delayed until the set time */\n  publish_date?: number;\n  /**\n   * `true` - post comments will be closed\n   * `false` - permission to leave post comments will be up to user's settings (default)\n   */\n  close_comments?: boolean;\n  /** Source of the post. Internal and external links supported */\n  copyright?: string;\n} & (\n  | {\n      message?: string;\n      attachments: string;\n    }\n  | {\n      message: string;\n      attachments?: string;\n    }\n);\n\n/**\n * Result data user in Share\n */\nexport type ShareUserInfo = {\n  /** User id */\n  id: number;\n  /** User name */\n  first_name: string;\n  /** User surname */\n  last_name: string;\n  /** User sex: 0 - not specified, 1 - female, 2 - male */\n  sex: 0 | 1 | 2;\n  /** User profile photo */\n  photo: string;\n};\n\n/**\n * Result data of link share\n */\nexport type LinkShareResult =\n  | { type: 'message'; users: ShareUserInfo[] }\n  | { type: 'post'; post_id: string }\n  | { type: 'story'; story_id: string }\n  | { type: 'qr' | 'link' | 'other' };\n\nexport type StoryObjectTransform = {\n  /** Rotation, from 0 to 359 deg. Counterclockwise rotation. */\n  rotation?: number;\n  /**\n   * The desired width of the sticker relative to the screen is (0, 1), the\n   * height will be calculated taking into account maintaining the aspect ratio\n   * of the content.\n   */\n  relation_width?: number;\n  /** From -1 to 1 of screen with */\n  translation_x?: number;\n  /** From -1 to 1 of screen height */\n  translation_y?: number;\n  /** Gravity. Default: center. */\n  gravity?:\n    | 'left_top'\n    | 'left_center'\n    | 'left_bottom'\n    | 'center_top'\n    | 'center'\n    | 'center_bottom'\n    | 'right_top'\n    | 'right_center'\n    | 'right_bottom';\n};\n\nexport type StoryActionHashtag = {\n  /** Hashtag text */\n  hashtag: string;\n  /** Hashtag style. Default: `blue_gradient` */\n  style?: 'transparent' | 'blue_gradient';\n};\n\nexport type StoryActionMention = {\n  /**\n   * Text in mention format:\n   * for users: \"[id123|name]\"\n   * for communities: \"[club123|name]\"\n   */\n  mention: string;\n  /** Mention style. Default: `red_gradient` */\n  style?: 'transparent' | 'red_gradient';\n};\n\nexport type StoryActionPlace = {\n  /** Place id */\n  place_id: number;\n  /** Place name */\n  title: string;\n  /** Category id */\n  category_id?: number;\n  /** Style */\n  style?: 'transparent' | 'blue' | 'green' | 'white';\n};\n\n/**\n * Story action link\n */\nexport type StoryActionLink = {\n  /** Content link */\n  link: string;\n  /**\n   * The value of the string that will be displayed on the client when\n   * clicking on the tooltip.\n   */\n  tooltip_text_key:\n    | 'tooltip_open_post'\n    | 'tooltip_open_photo'\n    | 'tooltip_open_page'\n    | 'tooltip_open_default';\n};\n\nexport type StoryActionTime = {\n  /** Time style. Default: `date` */\n  style?: 'black' | 'white' | 'green' | 'text' | 'date';\n  /** Timestamp in milliseconds */\n  timestamp_ms?: number;\n  /**\n   * Date (`timestamp_ms` alternative) in format:\n   * `yyyy:MM:dd HH:mm:ss`\n   * (this format is chosen to unify dates from exif fields https://vk.cc/9NrgMr) */\n  date?: string;\n  /** Top sticker title, meaning only for date style */\n  title?: string;\n};\n\nexport type StoryActionGeo = {\n  /** Place id */\n  place_id: number;\n  /** Place name */\n  text: string;\n  /** Category id */\n  category_id?: number;\n  /** Sticker style. Default: `blue`*/\n  style?: 'blue' | 'green' | 'white' | 'transparent';\n};\n\nexport type StoryActionQuestion = {\n  /** Question text */\n  question: string;\n  /** Button text */\n  button: string;\n};\n\nexport type StoryActionText = {\n  /**\n   * The text may contain mentions/hashtags in the formats specified with\n   * the corresponding objects\n   */\n  text: string;\n  /** Text style */\n  style?: 'classic' | 'cursive' | 'marker' | 'italics' | 'typewriter' | 'poster' | 'retro';\n  /** Background/border style. Default: `none` */\n  background_style?: 'none' | 'alpha' | 'solid' | 'sticker' | 'neon';\n  /** Horizontal alignment */\n  alignment?: 'center' | 'left' | 'right';\n  /** HEX color */\n  selection_color?: string;\n};\n\nexport type StoryActionEmoji = {\n  emoji: string;\n};\n\nexport type StoryActionSticker = {\n  /** Sticker id */\n  sticker_id: number;\n  /** Sticker url */\n  url?: string;\n  /** JSON sticker url */\n  animation_url?: string;\n  /** Sticker pack id */\n  pack_id?: number;\n};\n\nexport type StoryActionMarketItem = {\n  /** Product name */\n  title: string;\n  /** Product id in VK Market */\n  product_id?: number;\n  /** Owner id of product in VK Market */\n  owner_id?: number;\n  /** Aliexpress product link */\n  link?: string;\n};\n\n/**\n * Story action type\n */\nexport type StoryAction =\n  | StoryActionHashtag\n  | StoryActionMention\n  | StoryActionPlace\n  | StoryActionLink\n  | StoryActionTime\n  | StoryActionGeo\n  | StoryActionQuestion\n  | StoryActionText\n  | StoryActionEmoji\n  | StoryActionSticker\n  | StoryActionMarketItem;\n\nexport type StoryClickableZoneOrigin = {\n  x: number;\n  y: number;\n};\n\nexport type StoryClickableZone = {\n  /** Action type */\n  action_type: 'hashtag' | 'mention' | 'link' | 'place' | 'question' | 'market_item';\n  /** Action data */\n  action: StoryAction;\n  /**\n   * Clickable area border on the sticker. The points should be located\n   * clockwise, forming a closed square.\n   */\n  clickable_area?: StoryClickableZoneOrigin[];\n};\n\nexport type StoryRenderableSticker = (\n  | {\n      /** Content url */\n      url: string;\n    }\n  | {\n      /** Base64 string with BLOB */\n      blob: string;\n    }\n) & {\n  /** Story type */\n  content_type: 'image' | 'gif' | 'video';\n  /** Object transform */\n  transform?: StoryObjectTransform;\n  /** Clickable zones */\n  clickable_zones?: StoryClickableZone[];\n  /** Content width */\n  original_width?: number;\n  /** Content height */\n  original_height?: number;\n  /** Whether the sticker can be removed from the screen, `true` by default */\n  can_delete?: boolean;\n};\n\nexport type StoryNativeSticker = {\n  /** Story action type */\n  action_type:\n    | 'text'\n    | 'hashtag'\n    | 'mention'\n    | 'time'\n    | 'place'\n    | 'question'\n    | 'emoji'\n    | 'sticker'\n    | 'market_item';\n  /** Story action */\n  action: StoryAction;\n  /** Object transform */\n  transform?: StoryObjectTransform;\n  /** Whether the sticker can be removed from the screen, `true` by default */\n  can_delete?: boolean;\n};\n\n/**\n * Sticker container\n */\nexport type StickerContainer =\n  | {\n      sticker_type: 'renderable';\n      sticker: StoryRenderableSticker;\n    }\n  | {\n      sticker_type: 'native';\n      sticker: StoryNativeSticker;\n    };\n\n/** Link text for moving from a story (community stories only) */\nexport type StoryButtonText =\n  | 'learn_more' // «Подробнее» (default)\n  | 'to_store' // «В магазин»\n  | 'vote' // «Голосовать»\n  | 'more' // «Ещё»\n  | 'book' // «Забронировать»\n  | 'order' // «Заказать»\n  | 'enroll' // «Записаться»\n  | 'fill' // «Заполнить»\n  | 'signup' // «Зарегистрироваться»\n  | 'buy' // «Купить»\n  | 'ticket' // «Купить билет»\n  | 'write' // «Написать»\n  | 'open' // «Открыть»\n  | 'view' // «Посмотреть»\n  | 'go_to' // «Перейти»\n  | 'contact' // «Связаться»\n  | 'watch' // «Смотреть»\n  | 'play' // «Слушать»\n  | 'install' // «Установить»\n  | 'read'; // «Читать»\n\nexport type StoryAttachment = {\n  /** Button text key (см. link_text в stories.getVideoUploadServer) */\n  text: string;\n  /** Attach type */\n  type: 'url' | 'audio' | 'video' | 'photo';\n  /** Content url */\n  url?: string;\n  /** Owner id */\n  owner_id?: number;\n  /** Object id */\n  id?: number;\n  /** Access key for the attachment */\n  access_key?: string;\n};\n\nexport type ShowStoryBoxOptions = {\n  /** Story type */\n  background_type: 'image' | 'video' | 'none';\n  /** Camera type (only for `background_type: none`). Default: `back` */\n  camera_type?: 'back' | 'front';\n  /** Link to an image or video (should follow a direct link to mp4) */\n  url?: string;\n  /** Base64 string with BLOB (supported only for image) */\n  blob?: string;\n  /** Lock to move the photo */\n  locked?: boolean;\n  /** Story attachment object */\n  attachment?: StoryAttachment;\n  /** Array of sticker objects */\n  stickers?: StickerContainer[];\n};\n\n/**\n * Params of method for subscribing to a story updates\n */\nexport type SubscribeStoryAppOptions = {\n  /** Story owner id */\n  story_owner_id: number;\n  /** Story id */\n  story_id: number;\n  /** Clickable sticker id */\n  sticker_id: number;\n  /** Private stories access key */\n  access_key?: string;\n};\n\n/**\n * Group info\n */\nexport type GroupInfo = {\n  id: number;\n  name: string;\n  screen_name: string;\n  is_closed: number;\n  type: string;\n  is_member: number;\n  description: string;\n  photo_50: string;\n  photo_100: string;\n  photo_200: string;\n};\n\n/*\n * Options for request to adding a user to an audience with a retargeting pixel\n */\nexport type RetargetingPixelOptions = {\n  /** Pixel code, e.g. `VK-RTRG-447253-dUuM` */\n  pixel_code: string;\n  /** Event id, pixel rule */\n  event?: string;\n  /** ID of the retargeting group to which the current user should be added */\n  target_group_id?: number;\n  /** ID of the price list */\n  price_list_id?: number;\n  /** Type of product event */\n  products_event?: string;\n  /** Product params */\n  products_params?: string;\n};\n\n/**\n * Type for params field in OKWebAppCallAPIMethod\n */\nexport type OKCallApiParams = {\n  application_key: string;\n  access_token: string;\n  format?: string;\n\n  [key: string]: any;\n};\n\n/**\n * Type for VKWebAppCheckAllowedScopes method results\n */\nexport type VKWebAppCheckAllowedScopesResponseEntry = {\n  scope: string;\n  allowed: boolean;\n};\n\ntype ActionSheetSlide = {\n  media: ActionSheetSlideMedia;\n  title: string;\n  subtitle: string;\n};\n\ntype ActionSheetSlideMedia = (\n  | {\n      /** Content url */\n      url: string;\n    }\n  | {\n      /** Base64 string with BLOB */\n      blob: string;\n    }\n) & {\n  /** Media type */\n  type: 'image' | 'gif' | 'video';\n};\n\nexport type ShowSlidesSheetResponse = {\n  result: true;\n} & (\n  | {\n      action: 'confirm' | 'cancel';\n    }\n  | {\n      action: 'reject';\n      slide_index: number;\n    }\n);\n\nexport type ShowSlidesSheetRequest = {\n  slides: ActionSheetSlide[];\n};\n\ntype TranslationLanguage = 'ru' | 'en' | 'es' | 'pt' | string;\n\nexport type TranslateResponse = {\n  result: {\n    texts: string[];\n    source_lang: TranslationLanguage;\n  };\n};\n\nexport type TranslateRequest = {\n  texts: string[];\n  translation_language: TranslationLanguage;\n};\n\nexport type CallStartResponse = {\n  result: true;\n  join_link: string;\n};\n\nexport type CallJoinRequest = {\n  join_link: string;\n};\n\nexport type CallJoinResponse = {\n  result: true;\n};\n\nexport type CallGetStatusResponse = {\n  result: true;\n  is_active: boolean;\n};\n\nexport type CallLeftResponse = {\n  reason: string;\n};\n\nexport type CallFinishedResponse = {\n  result: true;\n};\n\nexport enum EGrantedPermission {\n  CAMERA = 'camera',\n  LOCATION = 'location',\n  PHOTO = 'photo',\n}\n\nexport type GetGrantedPermissionsResponse = {\n  permissions: EGrantedPermission[];\n};\n\nexport type CreateHashRequest = {\n  payload?: string;\n};\n\nexport type CreateHashResponse = {\n  ts: number;\n  hash: string;\n  payload?: string;\n};\n\nexport type ChangeFragmentResponse = {\n  location: string;\n};\n\nexport enum EGetLaunchParamsResponseLanguages {\n  RU = 'ru',\n  UK = 'uk',\n  UA = 'ua',\n  EN = 'en',\n  BE = 'be',\n  KZ = 'kz',\n  PT = 'pt',\n  ES = 'es',\n}\n\nexport enum EGetLaunchParamsResponseGroupRole {\n  ADMIN = 'admin',\n  EDITOR = 'editor',\n  MEMBER = 'member',\n  MODER = 'moder',\n  NONE = 'none',\n}\n\nexport enum EGetLaunchParamsResponsePlatforms {\n  DESKTOP_WEB = 'desktop_web',\n  DESKTOP_WEB_MESSENGER = 'desktop_web_messenger',\n  DESKTOP_APP_MESSENGER = 'desktop_app_messenger',\n  MOBILE_WEB = 'mobile_web',\n  MOBILE_ANDROID = 'mobile_android',\n  MOBILE_ANDROID_MESSENGER = 'mobile_android_messenger',\n  MOBILE_IPHONE = 'mobile_iphone',\n  MOBILE_IPHONE_MESSENGER = 'mobile_iphone_messenger',\n  MOBILE_IPAD = 'mobile_ipad',\n}\n\nexport type GetLaunchParamsResponse = {\n  vk_user_id: number;\n  vk_app_id: number;\n  vk_is_app_user: 0 | 1;\n  vk_are_notifications_enabled: 0 | 1;\n  vk_language: EGetLaunchParamsResponseLanguages;\n  vk_ref: string;\n  vk_access_token_settings: string;\n  vk_group_id?: number;\n  vk_viewer_group_role?: EGetLaunchParamsResponseGroupRole;\n  vk_platform: EGetLaunchParamsResponsePlatforms;\n  vk_is_favorite: 0 | 1;\n  vk_ts: number;\n  sign: string;\n};\n\nexport type ConversionHitRequest = {\n  pixel_code: string;\n  conversion_event: string;\n  conversion_value: number;\n};\n\nexport type ConversionHitResponse = {\n  result: true;\n};\n\nexport type VKWebAppShowBannerAdResponse = {\n  result: boolean;\n  banner_width: number;\n  banner_height: number;\n  banner_location: BannerAdLocation;\n  layout_type: BannerAdLayoutType;\n};\n\nexport type VKWebAppCheckBannerAdResponse = VKWebAppShowBannerAdResponse;\nexport type VKWebAppHideBannerAdResponse = VKWebAppShowBannerAdResponse;\nexport type VKWebAppBannerAdUpdatedResponse = VKWebAppShowBannerAdResponse;\nexport type VKWebAppBannerAdClosedByUserResponse = Omit<VKWebAppShowBannerAdResponse, 'result'>;\n\nexport type VKWebAppShowOrderBoxResponse = {\n  status: OrderBoxShowingStatus;\n  order_id: string;\n};\n\nexport type ScrollTopResponse = {\n  scrollTop: number;\n};\n\nexport type ShowSubscriptionBoxRequest = {\n  action: 'create' | 'resume' | 'cancel';\n  item?: string;\n  subscription_id?: string;\n};\n\nexport type ShowSubscriptionBoxResponse = {\n  success: boolean;\n  subscriptionId: string;\n};\n\nexport type AddToProfileRequest = {\n  ttl?: number;\n};\n\nexport type AddToProfileResponse = {\n  visibility: 'all' | 'friends' | 'best_friends';\n};\n\n/**\n * Map of types of request props of VK Bridge methods\n */\n/* eslint-disable @typescript-eslint/ban-types */\nexport type RequestPropsMap = {\n  VKWebAppInit: {};\n  VKWebAppAddToCommunity: {};\n  VKWebAppAddToHomeScreen: {};\n  VKWebAppAddToHomeScreenInfo: {};\n  VKWebAppAllowMessagesFromGroup: { group_id: number; key?: string };\n  VKWebAppAllowNotifications: {};\n  OKWebAppCallAPIMethod: { method: string; params: OKCallApiParams };\n  VKWebAppCallAPIMethod: {\n    method: string;\n    params: Record<'access_token' | 'v', string> & Record<string, string | number>;\n  };\n  VKWebAppCopyText: { text: string };\n  VKWebAppCreateHash: CreateHashRequest;\n  VKWebAppDownloadFile: { url: string; filename: string };\n  VKWebAppGetAuthToken: { app_id: number; scope: PersonalAuthScope | string };\n  VKWebAppClose: { status: AppCloseStatus; payload?: any };\n  VKWebAppOpenApp: { app_id: number; location?: string };\n  VKWebAppDenyNotifications: {};\n  VKWebAppFlashGetInfo: {};\n  VKWebAppFlashSetLevel: { level: number };\n  VKWebAppGetClientVersion: {};\n  VKWebAppGetCommunityToken: CommunityTokenRequestOptions;\n  VKWebAppGetConfig: {};\n  VKWebAppGetLaunchParams: {};\n  VKWebAppAudioPause: {};\n  VKWebAppGetEmail: {};\n  VKWebAppGetFriends: { multi?: boolean };\n  VKWebAppGetGeodata: {};\n  VKWebAppGetGrantedPermissions: {};\n  VKWebAppGetPersonalCard: { type: PersonalCardType[] };\n  VKWebAppGetPhoneNumber: {};\n  VKWebAppGetUserInfo: { user_id?: number };\n  VKWebAppJoinGroup: { group_id: number };\n  VKWebAppLeaveGroup: { group_id: number };\n  VKWebAppAddToMenu: {};\n  VKWebAppOpenCodeReader: {};\n  VKWebAppOpenContacts: {};\n  VKWebAppOpenPayForm: VKPayProps<VKPayActionType>;\n  VKWebAppOpenQR: {};\n  VKWebAppResizeWindow: { width: number; height?: number };\n  VKWebAppScroll: { top: number; speed?: number };\n  VKWebAppSendToClient: { fragment?: string };\n  VKWebAppSetLocation: { location: string; replace_state?: boolean };\n  VKWebAppSetViewSettings: {\n    status_bar_style: AppearanceType;\n    /** Android only */\n    action_bar_color?: 'none' | string;\n    /** Android only */\n    navigation_bar_color?: string;\n  };\n  VKWebAppShare: { link?: string };\n  VKWebAppShowCommunityWidgetPreviewBox: WidgetPreviewRequestOptions;\n  VKWebAppShowImages: { images: string[]; start_index?: number };\n  VKWebAppShowInviteBox: {};\n  VKWebAppShowLeaderBoardBox: { user_result: number };\n  VKWebAppShowMessageBox: MessageRequestOptions;\n  VKWebAppCheckBannerAd: {};\n  VKWebAppHideBannerAd: {};\n  VKWebAppShowBannerAd: ShowBannerAdRequest;\n  VKWebAppShowNativeAds: ShowNativeAdsRequest;\n  VKWebAppCheckNativeAds: CheckNativeAdsRequest;\n  VKWebAppShowOrderBox: OrderRequestOptions;\n  VKWebAppShowRequestBox: RequestForRequestOptions;\n  VKWebAppShowWallPostBox: WallPostRequestOptions;\n  VKWebAppShowSubscriptionBox: ShowSubscriptionBoxRequest;\n  VKWebAppOpenWallPost: { post_id: number; owner_id: number };\n  VKWebAppStorageGet: { keys: string[] };\n  VKWebAppStorageGetKeys: { count: number; offset: number };\n  VKWebAppStorageSet: { key: string; value: string };\n  VKWebAppTapticImpactOccurred: { style: TapticVibrationPowerType };\n  VKWebAppTapticNotificationOccurred: { type: TapticNotificationType };\n  VKWebAppTapticSelectionChanged: {};\n  VKWebAppAddToFavorites: {};\n  VKWebAppSendPayload: { group_id: number; payload: any };\n  VKWebAppDisableSwipeBack: {};\n  VKWebAppEnableSwipeBack: {};\n  VKWebAppSetSwipeSettings: { history: boolean };\n  VKWebAppShowStoryBox: ShowStoryBoxOptions;\n  VKWebAppAccelerometerStart: { refresh_rate?: string };\n  VKWebAppAccelerometerStop: {};\n  VKWebAppGyroscopeStart: {};\n  VKWebAppGyroscopeStop: {};\n  VKWebAppDeviceMotionStart: {};\n  VKWebAppDeviceMotionStop: {};\n  VKWebAppSubscribeStoryApp: SubscribeStoryAppOptions;\n  VKWebAppGetGroupInfo: { group_id: number };\n  VKWebAppLibverifyRequest: { phone: string };\n  VKWebAppLibverifyCheck: { code: string };\n  VKWebAppRetargetingPixel: RetargetingPixelOptions;\n  VKWebAppCheckAllowedScopes: { scopes: string };\n  VKWebAppConversionHit: ConversionHitRequest;\n  VKWebAppCheckSurvey: {};\n  VKWebAppShowSurvey: {};\n  VKWebAppScrollTop: {};\n  VKWebAppScrollTopStart: {};\n  VKWebAppScrollTopStop: {};\n  VKWebAppShowSlidesSheet: ShowSlidesSheetRequest;\n  VKWebAppTranslate: TranslateRequest;\n  VKWebAppCallStart: {};\n  VKWebAppCallJoin: CallJoinRequest;\n  VKWebAppCallGetStatus: {};\n  VKWebAppRecommend: {};\n  VKWebAppAddToProfile: AddToProfileRequest;\n};\n\n/**\n * Map of types of response data of VK Bridge methods\n */\nexport type ReceiveDataMap = {\n  VKWebAppInit: { result: true };\n  VKWebAppAddToCommunity: { group_id: number };\n  VKWebAppAddToHomeScreen: { result: true };\n  VKWebAppAddToHomeScreenInfo: { is_feature_supported: boolean; is_added_to_home_screen: boolean };\n  VKWebAppAllowMessagesFromGroup: { result: true };\n  VKWebAppAllowNotifications: { result: true };\n  OKWebAppCallAPIMethod: { response: any };\n  VKWebAppCallAPIMethod: { response: any };\n  VKWebAppCopyText: { result: true };\n  VKWebAppCreateHash: CreateHashResponse;\n  VKWebAppDownloadFile: { result: true };\n  VKWebAppGetAuthToken: { access_token: string; scope: string };\n  VKWebAppClose: { payload: any };\n  VKWebAppOpenApp: { result: true };\n  VKWebAppDenyNotifications: { result: true };\n  VKWebAppFlashGetInfo: { is_available: boolean; level: number };\n  VKWebAppFlashSetLevel: { result: true };\n  VKWebAppGetClientVersion: { platform: string; version: string };\n  VKWebAppGetEmail: { email: string; sign: string };\n  VKWebAppGetFriends: { users: UserGetFriendsFriend[] };\n  VKWebAppGetGeodata:\n    | { available: 0 }\n    | { available: 1; lat: number; long: number; accuracy: number };\n  VKWebAppGetGrantedPermissions: GetGrantedPermissionsResponse;\n  VKWebAppGetPersonalCard: PersonalCardData;\n  VKWebAppGetPhoneNumber: { phone_number: string; sign: string; is_verified: boolean };\n  VKWebAppGetUserInfo: UserInfo;\n  VKWebAppJoinGroup: { result: true };\n  VKWebAppLeaveGroup: { result: true };\n  VKWebAppAddToMenu: { result: true };\n  VKWebAppOpenCodeReader: CodeReaderOutput;\n  VKWebAppOpenQR: CodeReaderOutput;\n  VKWebAppOpenContacts: SelectedContact;\n  VKWebAppOpenPayForm: TransactionResult | { result: TransactionResult };\n  VKWebAppResizeWindow: { width: number; height: number };\n  VKWebAppScroll: { top: number; height: number };\n  VKWebAppSendToClient: { result: true };\n  VKWebAppSetLocation: { result: true };\n  VKWebAppSetViewSettings: { result: true };\n  VKWebAppShare: LinkShareResult[];\n  VKWebAppShowCommunityWidgetPreviewBox: { result: true };\n  VKWebAppShowImages: { result: true };\n  VKWebAppShowInviteBox: { success: true };\n  VKWebAppShowLeaderBoardBox: { success: boolean };\n  VKWebAppShowMessageBox: { result: true };\n  VKWebAppCheckBannerAd: VKWebAppCheckBannerAdResponse;\n  VKWebAppHideBannerAd: VKWebAppHideBannerAdResponse;\n  VKWebAppShowBannerAd: VKWebAppShowBannerAdResponse;\n  VKWebAppBannerAdUpdated: VKWebAppBannerAdUpdatedResponse;\n  VKWebAppBannerAdClosedByUser: VKWebAppBannerAdClosedByUserResponse;\n  VKWebAppShowNativeAds: { result: true };\n  VKWebAppCheckNativeAds: { result: boolean };\n  VKWebAppShowOrderBox: VKWebAppShowOrderBoxResponse;\n  VKWebAppShowRequestBox: RequestResult;\n  VKWebAppShowWallPostBox: { post_id: number | string };\n  VKWebAppShowSubscriptionBox: ShowSubscriptionBoxResponse;\n  VKWebAppOpenWallPost: { result: true };\n  VKWebAppStorageGet: { keys: Array<{ key: string; value: string }> };\n  VKWebAppStorageGetKeys: { keys: string[] };\n  VKWebAppStorageSet: { result: true };\n  VKWebAppTapticImpactOccurred: { result: true };\n  VKWebAppTapticNotificationOccurred: { result: true };\n  VKWebAppTapticSelectionChanged: { result: true };\n  VKWebAppAddToFavorites: { result: true };\n  VKWebAppSendPayload: { result: true };\n  VKWebAppGetCommunityToken: { access_token: string; scope: string };\n  VKWebAppAudioPause: { result: true };\n  VKWebAppAudioPaused: { position: number; type: string; id: string };\n  VKWebAppAudioStopped: {}; // Always empty\n  VKWebAppAudioTrackChanged: { type: string; id: string };\n  VKWebAppAudioUnpaused: { type: string; id: string };\n  VKWebAppInitAds: { init: 'true' | 'false' };\n  VKWebAppLoadAds: { load: 'true' | 'false' };\n  VKWebAppUpdateConfig: ParentConfigData;\n  VKWebAppGetConfig: ParentConfigData;\n  VKWebAppGetLaunchParams: GetLaunchParamsResponse;\n  VKWebAppUpdateInsets: { insets: Insets };\n  VKWebAppViewHide: {}; // Always empty\n  VKWebAppViewRestore: {}; // Always empty\n  VKWebAppDisableSwipeBack: { result: true };\n  VKWebAppEnableSwipeBack: { result: true };\n  VKWebAppSetSwipeSettings: { result: true };\n  VKWebAppShowStoryBox: { result: true };\n  VKWebAppAccelerometerStart: { result: true };\n  VKWebAppAccelerometerStop: { result: true };\n  VKWebAppGyroscopeStart: { result: true };\n  VKWebAppGyroscopeStop: { result: true };\n  VKWebAppAccelerometerChanged: { x: string; y: string; z: string };\n  VKWebAppGyroscopeChanged: { x: string; y: string; z: string };\n  VKWebAppDeviceMotionStart: { result: true };\n  VKWebAppDeviceMotionChanged: { alpha: string; beta: string; gamma: string };\n  VKWebAppDeviceMotionStop: { result: true };\n  VKWebAppLocationChanged: { location: string };\n  VKWebAppSubscribeStoryApp: { access_key: string };\n  VKWebAppGetGroupInfo: GroupInfo;\n  VKWebAppLibverifyOnConfirmed: { validate_session: string; validate_token: string };\n  VKWebAppLibverifyOnFailed: { code: VKWebAppLibverifyOnFailedCode };\n  VKWebAppRetargetingPixel: { result: true };\n  VKWebAppCheckAllowedScopes: { result: VKWebAppCheckAllowedScopesResponseEntry[] };\n  VKWebAppChangeFragment: ChangeFragmentResponse;\n  VKWebAppConversionHit: ConversionHitResponse;\n  VKWebAppCheckSurvey: { result: boolean };\n  VKWebAppShowSurvey: { result: boolean };\n  VKWebAppScrollTop: ScrollTopResponse;\n  VKWebAppScrollTopStart: { result: true };\n  VKWebAppScrollTopStop: { result: true };\n  VKWebAppShowSlidesSheet: ShowSlidesSheetResponse;\n  VKWebAppTranslate: TranslateResponse;\n  VKWebAppCallStart: CallStartResponse;\n  VKWebAppCallJoin: CallJoinResponse;\n  VKWebAppCallGetStatus: CallGetStatusResponse;\n  VKWebAppCallLeft: CallLeftResponse;\n  VKWebAppCallFinished: CallFinishedResponse;\n  VKWebAppRecommend: { result: true };\n  VKWebAppAddToProfile: AddToProfileResponse;\n};\n/* eslint-enable @typescript-eslint/ban-types */\n\ntype EventReceiveNames<\n  T extends keyof RequestPropsMap,\n  R extends string,\n  F extends string,\n> = Record<T, { result: R; failed: F }>;\n\n/**\n * Map of event names.\n */\nexport type ReceiveEventMap = EventReceiveNames<\n  'VKWebAppInit',\n  'VKWebAppInitResult',\n  'VKWebAppInitFailed'\n> &\n  EventReceiveNames<\n    'VKWebAppAddToCommunity',\n    'VKWebAppAddToCommunityResult',\n    'VKWebAppAddToCommunityFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAddToHomeScreen',\n    'VKWebAppAddToHomeScreenResult',\n    'VKWebAppAddToHomeScreenFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAddToHomeScreenInfo',\n    'VKWebAppAddToHomeScreenInfoResult',\n    'VKWebAppAddToHomeScreenInfoFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAllowMessagesFromGroup',\n    'VKWebAppAllowMessagesFromGroupResult',\n    'VKWebAppAllowMessagesFromGroupFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAllowNotifications',\n    'VKWebAppAllowNotificationsResult',\n    'VKWebAppAllowNotificationsFailed'\n  > &\n  EventReceiveNames<\n    'OKWebAppCallAPIMethod',\n    'OKWebAppCallAPIMethodResult',\n    'OKWebAppCallAPIMethodFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppCallAPIMethod',\n    'VKWebAppCallAPIMethodResult',\n    'VKWebAppCallAPIMethodFailed'\n  > &\n  EventReceiveNames<'VKWebAppCopyText', 'VKWebAppCopyTextResult', 'VKWebAppCopyTextFailed'> &\n  EventReceiveNames<'VKWebAppCreateHash', 'VKWebAppCreateHashResult', 'VKWebAppCreateHashFailed'> &\n  EventReceiveNames<\n    'VKWebAppDownloadFile',\n    'VKWebAppDownloadFileResult',\n    'VKWebAppDownloadFileFailed'\n  > &\n  // NOTE: Different request/response events\n  EventReceiveNames<\n    'VKWebAppGetAuthToken',\n    'VKWebAppAccessTokenReceived',\n    'VKWebAppAccessTokenFailed'\n  > &\n  EventReceiveNames<'VKWebAppClose', 'VKWebAppCloseResult', 'VKWebAppCloseFailed'> &\n  EventReceiveNames<'VKWebAppOpenApp', 'VKWebAppOpenAppResult', 'VKWebAppOpenAppFailed'> &\n  EventReceiveNames<\n    'VKWebAppDenyNotifications',\n    'VKWebAppDenyNotificationsResult',\n    'VKWebAppDenyNotificationsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppFlashGetInfo',\n    'VKWebAppFlashGetInfoResult',\n    'VKWebAppFlashGetInfoFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppFlashSetLevel',\n    'VKWebAppFlashSetLevelResult',\n    'VKWebAppFlashSetLevelFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetClientVersion',\n    'VKWebAppGetClientVersionResult',\n    'VKWebAppGetClientVersionFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetCommunityToken',\n    'VKWebAppGetCommunityTokenResult',\n    'VKWebAppGetCommunityTokenFailed'\n  > &\n  EventReceiveNames<'VKWebAppGetConfig', 'VKWebAppGetConfigResult', 'VKWebAppGetConfigFailed'> &\n  EventReceiveNames<\n    'VKWebAppGetLaunchParams',\n    'VKWebAppGetLaunchParamsResult',\n    'VKWebAppGetLaunchParamsFailed'\n  > &\n  EventReceiveNames<'VKWebAppAudioPause', 'VKWebAppAudioPauseResult', 'VKWebAppAudioPauseFailed'> &\n  EventReceiveNames<'VKWebAppGetEmail', 'VKWebAppGetEmailResult', 'VKWebAppGetEmailFailed'> &\n  EventReceiveNames<'VKWebAppGetFriends', 'VKWebAppGetFriendsResult', 'VKWebAppGetFriendsFailed'> &\n  EventReceiveNames<'VKWebAppGetGeodata', 'VKWebAppGetGeodataResult', 'VKWebAppGetGeodataFailed'> &\n  EventReceiveNames<\n    'VKWebAppGetGrantedPermissions',\n    'VKWebAppGetGrantedPermissionsResult',\n    'VKWebAppGetGrantedPermissionsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetPersonalCard',\n    'VKWebAppGetPersonalCardResult',\n    'VKWebAppGetPersonalCardFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetPhoneNumber',\n    'VKWebAppGetPhoneNumberResult',\n    'VKWebAppGetPhoneNumberFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetUserInfo',\n    'VKWebAppGetUserInfoResult',\n    'VKWebAppGetUserInfoFailed'\n  > &\n  EventReceiveNames<'VKWebAppJoinGroup', 'VKWebAppJoinGroupResult', 'VKWebAppJoinGroupFailed'> &\n  EventReceiveNames<'VKWebAppLeaveGroup', 'VKWebAppLeaveGroupResult', 'VKWebAppLeaveGroupFailed'> &\n  EventReceiveNames<'VKWebAppAddToMenu', 'VKWebAppAddToMenuResult', 'VKWebAppAddToMenuFailed'> &\n  EventReceiveNames<\n    'VKWebAppOpenCodeReader',\n    'VKWebAppOpenCodeReaderResult',\n    'VKWebAppOpenCodeReaderFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppOpenContacts',\n    'VKWebAppOpenContactsResult',\n    'VKWebAppOpenContactsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppOpenPayForm',\n    'VKWebAppOpenPayFormResult',\n    'VKWebAppOpenPayFormFailed'\n  > &\n  EventReceiveNames<'VKWebAppOpenQR', 'VKWebAppOpenQRResult', 'VKWebAppOpenQRFailed'> &\n  EventReceiveNames<\n    'VKWebAppResizeWindow',\n    'VKWebAppResizeWindowResult',\n    'VKWebAppResizeWindowFailed'\n  > &\n  EventReceiveNames<'VKWebAppScroll', 'VKWebAppScrollResult', 'VKWebAppScrollFailed'> &\n  EventReceiveNames<\n    'VKWebAppSendToClient',\n    'VKWebAppSendToClientResult',\n    'VKWebAppSendToClientFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppSetLocation',\n    'VKWebAppSetLocationResult',\n    'VKWebAppSetLocationFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppSetViewSettings',\n    'VKWebAppSetViewSettingsResult',\n    'VKWebAppSetViewSettingsFailed'\n  > &\n  EventReceiveNames<'VKWebAppShare', 'VKWebAppShareResult', 'VKWebAppShareFailed'> &\n  EventReceiveNames<\n    'VKWebAppShowCommunityWidgetPreviewBox',\n    'VKWebAppShowCommunityWidgetPreviewBoxResult',\n    'VKWebAppShowCommunityWidgetPreviewBoxFailed'\n  > &\n  EventReceiveNames<'VKWebAppShowImages', 'VKWebAppShowImagesResult', 'VKWebAppShowImagesFailed'> &\n  EventReceiveNames<\n    'VKWebAppShowInviteBox',\n    'VKWebAppShowInviteBoxResult',\n    'VKWebAppShowInviteBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowLeaderBoardBox',\n    'VKWebAppShowLeaderBoardBoxResult',\n    'VKWebAppShowLeaderBoardBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowMessageBox',\n    'VKWebAppShowMessageBoxResult',\n    'VKWebAppShowMessageBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppCheckBannerAd',\n    'VKWebAppCheckBannerAdResult',\n    'VKWebAppCheckBannerAdFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppHideBannerAd',\n    'VKWebAppHideBannerAdResult',\n    'VKWebAppHideBannerAdFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowBannerAd',\n    'VKWebAppShowBannerAdResult',\n    'VKWebAppShowBannerAdFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowNativeAds',\n    'VKWebAppShowNativeAdsResult',\n    'VKWebAppShowNativeAdsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppCheckNativeAds',\n    'VKWebAppCheckNativeAdsResult',\n    'VKWebAppCheckNativeAdsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowOrderBox',\n    'VKWebAppShowOrderBoxResult',\n    'VKWebAppShowOrderBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowRequestBox',\n    'VKWebAppShowRequestBoxResult',\n    'VKWebAppShowRequestBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowWallPostBox',\n    'VKWebAppShowWallPostBoxResult',\n    'VKWebAppShowWallPostBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowSubscriptionBox',\n    'VKWebAppShowSubscriptionBoxResult',\n    'VKWebAppShowSubscriptionBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppOpenWallPost',\n    'VKWebAppOpenWallPostResult',\n    'VKWebAppOpenWallPostFailed'\n  > &\n  EventReceiveNames<'VKWebAppStorageGet', 'VKWebAppStorageGetResult', 'VKWebAppStorageGetFailed'> &\n  EventReceiveNames<\n    'VKWebAppStorageGetKeys',\n    'VKWebAppStorageGetKeysResult',\n    'VKWebAppStorageGetKeysFailed'\n  > &\n  EventReceiveNames<'VKWebAppStorageSet', 'VKWebAppStorageSetResult', 'VKWebAppStorageSetFailed'> &\n  EventReceiveNames<\n    'VKWebAppTapticImpactOccurred',\n    'VKWebAppTapticImpactOccurredResult',\n    'VKWebAppTapticImpactOccurredFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppTapticNotificationOccurred',\n    'VKWebAppTapticNotificationOccurredResult',\n    'VKWebAppTapticNotificationOccurredFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppTapticSelectionChanged',\n    'VKWebAppTapticSelectionChangedResult',\n    'VKWebAppTapticSelectionChangedFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAddToFavorites',\n    'VKWebAppAddToFavoritesResult',\n    'VKWebAppAddToFavoritesFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppSendPayload',\n    'VKWebAppSendPayloadResult',\n    'VKWebAppSendPayloadFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppDisableSwipeBack',\n    'VKWebAppDisableSwipeBackResult',\n    'VKWebAppDisableSwipeBackFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppEnableSwipeBack',\n    'VKWebAppEnableSwipeBackResult',\n    'VKWebAppEnableSwipeBackFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppSetSwipeSettings',\n    'VKWebAppSetSwipeSettingsResult',\n    'VKWebAppSetSwipeSettingsFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowStoryBox',\n    'VKWebAppShowStoryBoxResult',\n    'VKWebAppShowStoryBoxFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAccelerometerStart',\n    'VKWebAppAccelerometerStartResult',\n    'VKWebAppAccelerometerStartFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppAccelerometerStop',\n    'VKWebAppAccelerometerStopResult',\n    'VKWebAppAccelerometerStopFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGyroscopeStart',\n    'VKWebAppGyroscopeStartResult',\n    'VKWebAppGyroscopeStartFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGyroscopeStop',\n    'VKWebAppGyroscopeStopResult',\n    'VKWebAppGyroscopeStopFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppDeviceMotionStart',\n    'VKWebAppDeviceMotionStartResult',\n    'VKWebAppDeviceMotionStartFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppDeviceMotionStop',\n    'VKWebAppDeviceMotionStopResult',\n    'VKWebAppDeviceMotionStopFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppSubscribeStoryApp',\n    'VKWebAppSubscribeStoryAppResult',\n    'VKWebAppSubscribeStoryAppFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppGetGroupInfo',\n    'VKWebAppGetGroupInfoResult',\n    'VKWebAppGetGroupInfoFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppRetargetingPixel',\n    'VKWebAppRetargetingPixelResult',\n    'VKWebAppRetargetingPixelFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppCheckAllowedScopes',\n    'VKWebAppCheckAllowedScopesResult',\n    'VKWebAppCheckAllowedScopesFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppCheckSurvey',\n    'VKWebAppCheckSurveyResult',\n    'VKWebAppCheckSurveyFailed'\n  > &\n  EventReceiveNames<'VKWebAppShowSurvey', 'VKWebAppShowSurveyResult', 'VKWebAppShowSurveyFailed'> &\n  EventReceiveNames<\n    'VKWebAppConversionHit',\n    'VKWebAppConversionHitResult',\n    'VKWebAppConversionHitFailed'\n  > &\n  EventReceiveNames<'VKWebAppScrollTop', 'VKWebAppScrollTopResult', 'VKWebAppScrollTopFailed'> &\n  EventReceiveNames<\n    'VKWebAppScrollTopStart',\n    'VKWebAppScrollTopStartResult',\n    'VKWebAppScrollTopStop'\n  > &\n  EventReceiveNames<\n    'VKWebAppScrollTopStop',\n    'VKWebAppScrollTopStopResult',\n    'VKWebAppScrollTopStopFailed'\n  > &\n  EventReceiveNames<\n    'VKWebAppShowSlidesSheet',\n    'VKWebAppShowSlidesSheetResult',\n    'VKWebAppShowSlidesSheetFailed'\n  > &\n  EventReceiveNames<'VKWebAppTranslate', 'VKWebAppTranslateResult', 'VKWebAppTranslateFailed'> &\n  EventReceiveNames<'VKWebAppCallStart', 'VKWebAppCallStartResult', 'VKWebAppCallStartFailed'> &\n  EventReceiveNames<'VKWebAppCallJoin', 'VKWebAppCallJoinResult', 'VKWebAppCallJoinFailed'> &\n  EventReceiveNames<\n    'VKWebAppCallGetStatus',\n    'VKWebAppCallGetStatusResult',\n    'VKWebAppCallGetStatusFailed'\n  > &\n  EventReceiveNames<'VKWebAppRecommend', 'VKWebAppRecommendResult', 'VKWebAppRecommendFailed'> &\n  EventReceiveNames<\n    'VKWebAppAddToProfile',\n    'VKWebAppAddToProfileResult',\n    'VKWebAppAddToProfileFailed'\n  >;\n","import { VKBridge, VKBridgeSend } from './types/bridge';\nimport { Middleware, MiddlewareAPI } from './types/middleware';\n\n/**\n * Creates the VK Bridge enhancer that applies middleware to the `send`\n * method. This is handy for a variety of task such as logging every sent\n * event.\n *\n * @param middlewares The middleware chain to be applied.\n * @returns The VK Bridge enhancer applying the middleware.\n */\nexport function applyMiddleware(\n  ...middlewares: Array<Middleware | undefined | null>\n): (bridge: VKBridge) => VKBridge {\n  if (middlewares.includes(undefined) || middlewares.includes(null)) {\n    return applyMiddleware(\n      ...middlewares.filter((item): item is Middleware => typeof item === 'function'),\n    );\n  }\n\n  return (bridge) => {\n    if (middlewares.length === 0) {\n      return bridge;\n    }\n\n    let send: VKBridgeSend = () => {\n      throw new Error(\n        'Sending events while constructing your middleware is not allowed. ' +\n          'Other middleware would not be applied to this send.',\n      );\n    };\n\n    const middlewareAPI: MiddlewareAPI = {\n      subscribe: bridge.subscribe,\n      send: (...args) => bridge.send(...args),\n    };\n\n    const chain = middlewares\n      .filter((item): item is Middleware => typeof item === 'function')\n      .map((middleware) => middleware(middlewareAPI)) //\n      .reduce((a, b) => (send) => a(b(send)));\n\n    send = chain(bridge.send);\n\n    return {\n      ...bridge,\n      send,\n    };\n  };\n}\n","import type { GetLaunchParamsResponse } from './types/data';\nimport {\n  EGetLaunchParamsResponseLanguages,\n  EGetLaunchParamsResponseGroupRole,\n  EGetLaunchParamsResponsePlatforms,\n} from './types/data';\n\nexport interface LaunchParams extends GetLaunchParamsResponse {\n  vk_chat_id: string;\n  vk_is_recommended: number;\n  vk_profile_id: number;\n  vk_has_profile_button: number;\n  vk_testing_group_id: number;\n  odr_enabled: undefined | 1;\n}\n\n/**\n * @see https://dev.vk.com/mini-apps/development/launch-params\n */\nexport const parseURLSearchParamsForGetLaunchParams = (\n  searchParams: string,\n): Partial<LaunchParams> => {\n  const launchParams: Partial<LaunchParams> = {};\n\n  try {\n    const parsedSearchParams = new URLSearchParams(searchParams);\n\n    const convertToggleStateFromStringToNumber = (value: string) => {\n      switch (value) {\n        case '0':\n          return 0;\n        case '1':\n          return 1;\n        default:\n          return undefined;\n      }\n    };\n\n    parsedSearchParams.forEach((value, query) => {\n      switch (query) {\n        case 'vk_ts':\n        case 'vk_is_recommended':\n        case 'vk_profile_id':\n        case 'vk_has_profile_button':\n        case 'vk_testing_group_id':\n        case 'vk_user_id':\n        case 'vk_app_id':\n        case 'vk_group_id':\n          launchParams[query] = Number(value);\n          break;\n        case 'sign':\n        case 'vk_chat_id':\n        case 'vk_ref':\n        case 'vk_access_token_settings':\n          launchParams[query] = value;\n          break;\n        case 'odr_enabled':\n          launchParams['odr_enabled'] = value === '1' ? 1 : undefined;\n          break;\n        case 'vk_is_app_user':\n        case 'vk_are_notifications_enabled':\n        case 'vk_is_favorite': {\n          launchParams[query] = convertToggleStateFromStringToNumber(value);\n          break;\n        }\n        case 'vk_language': {\n          const validateVKLanguage = (value: string): value is EGetLaunchParamsResponseLanguages =>\n            Object.values(EGetLaunchParamsResponseLanguages).some((i) => i === value);\n          launchParams['vk_language'] = validateVKLanguage(value) ? value : undefined;\n          break;\n        }\n        case 'vk_viewer_group_role': {\n          const validateVKViewerGroupRole = (\n            value: string,\n          ): value is EGetLaunchParamsResponseGroupRole =>\n            Object.values(EGetLaunchParamsResponseGroupRole).some((i) => i === value);\n          launchParams['vk_viewer_group_role'] = validateVKViewerGroupRole(value)\n            ? value\n            : undefined;\n          break;\n        }\n        case 'vk_platform': {\n          const validateVKPlatform = (value: string): value is EGetLaunchParamsResponsePlatforms =>\n            Object.values(EGetLaunchParamsResponsePlatforms).some((i) => i === value);\n          launchParams['vk_platform'] = validateVKPlatform(value) ? value : undefined;\n          break;\n        }\n      }\n    });\n  } catch (e) {\n    console.warn(e);\n  }\n\n  return launchParams;\n};\n","import { createVKBridge } from './bridge';\nimport { version } from '../package.json';\n\n// VK Bridge API\nconst bridge = createVKBridge(version);\n\n// Export typings\nexport * from './types/data';\nexport * from './types/bridge';\nexport * from './types/middleware';\nexport * from './types/deprecated';\n\nexport { applyMiddleware } from './applyMiddleware';\n\nexport { parseURLSearchParamsForGetLaunchParams } from './parseURLSearchParamsForGetLaunchParams';\n\nexport { bridge as default };\n"],"names":[],"mappings":"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"}